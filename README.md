ğŸŒ± PICKPLE
=============
<img width="1114" alt="image" src="https://github.com/user-attachments/assets/a1304f96-5a02-4f43-9719-f648aad988ad">


## ğŸ“¢ í”„ë¡œì íŠ¸ ê°„ë‹¨ ì†Œê°œ

### **Pickple**! (Pick + people)

ê³ ê° ê²½í—˜ì„ ìµœìš°ì„  ê°€ì¹˜ë¡œ, ë§ì€ ê³ ê°ë“¤ì—ê²Œ ê·¸ë“¤ì´ ì›í•˜ëŠ” ê²½í—˜ì„ ì œê³µí•˜ì—¬ ì„ íƒ(pick) ë°›ìëŠ” ì†Œë§ì„ ë‹´ì•˜ìŠµë‹ˆë‹¤.

## ğŸ¯ í”„ë¡œì íŠ¸ ëª©í‘œ

- **MSA** êµ¬ì¡°ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ì˜ í™•ì¥ì„±ê³¼ ìœ ì—°ì„±ì„ í™•ë³´
- **Kafka**ì™€ **Redis**ë¥¼ í™œìš©í•˜ì—¬ **ë¹„ë™ê¸° ë©”ì‹œì§•ìœ¼ë¡œ ì„œë¹„ìŠ¤ ê°„ í†µì‹  ë° ìºì‹±**ì„ í†µí•´ ì•ˆì •ì ì´ê³  ë¹ ë¥¸ ì„œë¹„ìŠ¤ êµ¬ì¶•
- **ë™ì‹œì„±** ì²˜ë¦¬ë¥¼ í†µí•œ ì•ˆì •ì„± ìˆëŠ” ì„œë¹„ìŠ¤ êµ¬ì¶•

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Backend
<img src="https://img.shields.io/badge/JAVA-007396?style=for-the-badge&logo=java&logoColor=white"><img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&logo=Spring&logoColor=white"><img src="https://img.shields.io/badge/POSTGRESQL-4169E1?style=for-the-badge&logo=postgresql&logoColor=white"><img src="https://img.shields.io/badge/MONGODB-47A248?style=for-the-badge&logo=mongodb&logoColor=white"><img src="https://img.shields.io/badge/REDIS-FF4438?style=for-the-badge&logo=redis&logoColor=white"><img src="https://img.shields.io/badge/apachekafka-231F20?style=for-the-badge&logo=apachekafka&logoColor=white"><img src="https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=gradle&logoColor=white"><img src="https://img.shields.io/badge/springsecurity-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white"><img src="https://img.shields.io/badge/jsonwebtokens-000000?style=for-the-badge&logo=jsonwebtokens&logoColor=white"><img src="https://img.shields.io/badge/springDataJPA-90E59A?style=for-the-badge&logo=springboot&logoColor=white"><img src="https://img.shields.io/badge/JUnit5-FB4F14?style=for-the-badge&logo=JUnit5&logoColor=white">


### DevOps
<img src="https://img.shields.io/badge/amazonec2-FF9900?style=for-the-badge&logo=amazonec2&logoColor=white"><img src="https://img.shields.io/badge/amazonrds-527FFF?style=for-the-badge&logo=amazonrds&logoColor=white"><img src="https://img.shields.io/badge/docker-2496ED?style=for-the-badge&logo=docker&logoColor=white"><img src="https://img.shields.io/badge/githubactions-2088FF?style=for-the-badge&logo=githubactions&logoColor=white"><img src="https://img.shields.io/badge/apachejmeter-D22128?style=for-the-badge&logo=apachejmeter&logoColor=white"><img src="https://img.shields.io/badge/prometheus-E6522C?style=for-the-badge&logo=prometheus&logoColor=white"><img src="https://img.shields.io/badge/grafana-F46800?style=for-the-badge&logo=grafana&logoColor=white">


### Tools
<img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=white"><img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white"><img src="https://img.shields.io/badge/postman-FF6C37?style=for-the-badge&logo=postman&logoColor=white"><img src="https://img.shields.io/badge/intellijidea-000000?style=for-the-badge&logo=intellijidea&logoColor=white"><img src="https://img.shields.io/badge/slack-4A154B?style=for-the-badge&logo=slack&logoColor=white"><img src="https://img.shields.io/badge/notion-000000?style=for-the-badge&logo=notion&logoColor=white">

## ğŸª„ ì£¼ìš” ê¸°ëŠ¥

* **ì£¼ë¬¸**

    - [x] **Kafka**ë¥¼ í†µí•´ ì£¼ë¬¸, ì¬ê³  - ê²°ì œ - ë°°ì†¡ - ì•Œë¦¼ ì„œë¹„ìŠ¤ ê°„ **ë¹„ë™ê¸° í†µì‹ ** êµ¬í˜„
    - [x] Order ì„œë¹„ìŠ¤ê°€ ì£¼ë¬¸ì˜ ì „ì²´ í”„ë¡œì„¸ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê³ , ê²°ì œ ë° ë°°ì†¡ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ìƒíƒœ ë³€ê²½ì„ íŠ¸ë¦¬ê±°í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„
          <details><summary>**ì£¼ë¬¸ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨**</summary>
          ![image](https://github.com/user-attachments/assets/7feed1cb-f1f9-4dd2-a5c9-718e2289ee55)
          </details>
    - [x] **TTL** ì„¤ì •ì„ í†µí•´ ì£¼ë¬¸ ìš”ì²­ í›„ 5ë¶„ ë™ì•ˆ ê²°ì œ ë¯¸ì§„í–‰ ì‹œ, ì£¼ë¬¸ ìë™ ì·¨ì†Œ

* **ì˜ˆì•½ êµ¬ë§¤**

    - [x] ë™ì‹œì— ë§ì€ ìš”ì²­ ì‹œ, ì¬ê³  ê´€ë¦¬ ë¡œì§ì—ì„œì˜ **ë™ì‹œì„± ì´ìŠˆ ë°©ì§€**ë¥¼ ìœ„í•´ **ë¶„ì‚°ë½** ë„ì…
    - [x] ì£¼ë¬¸ ì‹œ (ì£¼ë¬¸ ìš”ì²­ â†’ ì¬ê³  ê°ì†Œ â†’ ì£¼ë¬¸ ìƒì„±) ë¶„ì‚°ë½ í™˜ê²½ì—ì„œì˜ **ê°±ì‹  ìœ ì‹¤ ë°©ì§€**ë¥¼ ìœ„í•´ ë‚™ê´€ì  ë½ ì¶”ê°€ ë„ì…

* **ì•ŒëŒ**

    - [x] Grafanaì™€ Slackì„ ì—°ë™í•˜ì—¬ **ì„œë²„ ë‹¤ìš´ ì‹œ** ìŠ¬ë™ ì±„ë„ì„ í†µí•œ ì•ŒëŒ ìˆ˜ì‹  (#server_channel)
    - [x] **íŠ¸ë˜í”½ ì„ê³„ì¹˜**ì—ì„œ 50% ì´ìƒ ì‹œ ê²½ê³  ì•ŒëŒ, 80% ì´ìƒ ì‹œ ìœ„í—˜ ì•ŒëŒ (#traffic_channel)
    - [x] ì£¼ë¬¸, ë°°ì†¡ ì™„ë£Œ ì‹œ kafkaë¥¼ í†µí•œ **ì‹¤ì‹œê°„** ë©”ì¼ ì•ŒëŒ ì „ì†¡

* **ëª¨ë‹ˆí„°ë§**

    - [x] Grafanaì˜ Provisioning ì‚¬ìš©ìœ¼ë¡œ ì–´ë–¤ í™˜ê²½ì—ì„œ ì‹¤í–‰ë˜ì–´ë„ ì„¤ì •í•´ë‘” ì•ŒëŒ, ëŒ€ì‹œë³´ë“œ ë“±ì´ ìë™ provisioned ë˜ë„ë¡ ì„¤ì • ìë™í™”
    - [x] Lokië¥¼ í†µí•œ ì‹¤ì‹œê°„ ë¡œê·¸ ë¶„ì„ ë° ì‹œê°í™”
    - [x] Zipkin, prometheusë¥¼ í†µí•´ ë¶„ì‚°ì¶”ì  ë° ë¡œê·¸ ìˆ˜ì§‘

* **ê³ ê°€ìš©ì„± í™•ë³´**

    - [x] Resilience4j **Circuit Breaker**ë¥¼ í†µí•´ ì„œë¹„ìŠ¤ ê°„ ì¥ì•  ì „íŒŒ ë°©ì§€, íšŒë³µíƒ„ë ¥ì„± í–¥ìƒ
    - [x] Redis **Replication**ê³¼ **Sentinel**ì„ í†µí•œ ë¶„ì‚° ì²˜ë¦¬ ë° ê³ ê°€ìš©ì„± í™•ë³´

        - Replication:  ì½ê¸° ìš”ì²­ì„ ë ˆí”Œë¦¬ì¹´ ë…¸ë“œë¡œ ìš°ì„ ì ìœ¼ë¡œ ë¶„ì‚°í•˜ê³ , ì“°ê¸° ìš”ì²­ì€ ë§ˆìŠ¤í„° ë…¸ë“œë¡œ ì „ì†¡í•˜ì—¬ ë¶€í•˜ ë¶„ì‚°
        - Sentinel: ë§ˆìŠ¤í„°ê°€ ë‹¤ìš´ë˜ì—ˆì„ ê²½ìš° ìŠ¬ë ˆì´ë¸Œ ì¤‘ í•˜ë‚˜ë¥¼ ìƒˆë¡œìš´ ë§ˆìŠ¤í„°ë¡œ auto-failover

* **ì•„í‚¤í…ì²˜**
    - [x] Domain Driven Design: ë„ë©”ì¸ ì¤‘ì‹¬ì˜ ì‹œìŠ¤í…œ ì„¤ê³„ ë° ë„ë©”ì¸ ëª¨ë¸ì— ì§‘ì¤‘í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
        <details><summary> íŒ¨í‚¤ì§€ êµ¬ì¡°</summary>

          ```java
          com.pickple.commerce-service
          â”œâ”€â”€ application
          â”‚   â”œâ”€â”€ dto  
          â”‚   â”‚   â”œâ”€â”€ OrderCreateResponseDto.java
          â”‚   â”‚   â””â”€â”€ OrderResponseDto.java
          â”‚   â”œâ”€â”€ service
          â”‚       â””â”€â”€ OrderService.java
          â”œâ”€â”€ domain
          â”‚   â”œâ”€â”€ model
          â”‚   â”‚   â”œâ”€â”€ Order.java
          â”‚   â”‚   â”œâ”€â”€ OrderDetail.java
          â”‚   â”‚   â””â”€â”€ OrderStatus.java
          â”‚   â””â”€â”€ repository
          â”‚       â””â”€â”€ OrderRepository.java
          â”œâ”€â”€ exception
          â”‚   â”œâ”€â”€ CommerceErrorCode.java
          â”‚   â”œâ”€â”€ CommerceExceptionHandler.java
          â”‚   â””â”€â”€ CustomException.java
          â”œâ”€â”€ infrastructure
          â”‚   â”œâ”€â”€ configuration
          â”‚   â”‚   â”œâ”€â”€ AuditAwareImpl.java
          â”‚   â”‚   â”œâ”€â”€ JpaConfig.java
          â”‚   â”‚   â””â”€â”€ SecurityConfig.java
          â”‚   â”œâ”€â”€ feign
          â”‚   â”‚   â”œâ”€â”€ DeliveryClient.java
          â”‚   â”‚   â”œâ”€â”€ PaymentClient.java
          â”‚   â”‚   â””â”€â”€ dto
          â”‚   â”‚       â”œâ”€â”€ DeliveryClientDto.java
          â”‚   â”‚       â””â”€â”€ PaymentClientDto.java
          â”‚   â”œâ”€â”€ messaging
          â”‚   â”‚   â”œâ”€â”€ OrderEventService.java
          â”‚   â”‚   â””â”€â”€ OrderMessagingProducerService.java
          â”‚   â””â”€â”€ security
          â”‚       â””â”€â”€ CustomPreAuthFilter.java
          â”œâ”€â”€ presentation
          â”‚   â”œâ”€â”€ controller
          â”‚   â”‚   â””â”€â”€ OrderController.java
          â”‚   â””â”€â”€ request
          â”‚       â””â”€â”€ OrderCreateRequestDto.java
          ```
          </details>

    - [x] Layered Architecture: ì‹œìŠ¤í…œì„ ì—¬ëŸ¬ ë ˆì´ì–´ë¡œ ë‚˜ëˆ„ì–´ ì„œë¡œ ë‹¤ë¥¸ ê´€ì‹¬ì‚¬ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ê³„
    - [x] Event-Driven Architecture: Kafkaë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ë²¤íŠ¸ê°€ ì „ë‹¬ë˜ë©°, ê° ì„œë¹„ìŠ¤ê°€ ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•˜ê³ , ì†Œë¹„í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í†µì‹ 

* **CI/CD**
  - [x] CI: ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ì„±í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
  - [x] CD: ë„ì»¤í™”í•œ imageë¥¼ AWS ECRì— Push, ê° EC2ì— ë°°í¬

<br>

## ğŸ“š API ëª…ì„¸ì„œ

### [POSTMAN DOCS](https://documenter.getpostman.com/view/26598837/2sAY4rGRdh) 
<br>

## ğŸ§©ERD
![pickple](https://github.com/user-attachments/assets/5641d753-fc1e-47d9-a1a8-eb1c28ed75ac)

<br>

## ğŸ—‚ï¸ ì¸í”„ë¼ ì„¤ê³„ë„
![image](https://github.com/user-attachments/assets/2cb9c935-d668-4eff-8062-b829010212d7)

- **ë°°í¬ ë§í¬** [ğŸ”—ë§í¬](http://ec2-52-206-139-65.compute-1.amazonaws.com:19091/)
  <br>
- **ì„œë¹„ìŠ¤ êµ¬ì¡°**

| Service	             | Description	    | Authorization	 | Port   |
|:---------------------|:----------------|:---------------|:-------|
| [`Eureka`]           | ì„œë¹„ìŠ¤ ë“±ë¡ ë° ë¡œë“œë°¸ëŸ°ì‹±|       | `19090` |
| [`API Gateway`]      | ìš”ì²­ ì¸ì¦ ë° ë¼ìš°íŒ…     | jwt í† í° ì¸ì¦      | `19091` |
| [`Auth`]             | jwt í† í° ë°œê¸‰ ë° ê´€ë¦¬     | jwt í† í° ë°œê¸‰      | `19092` |
| [`User`]             | ì‚¬ìš©ì ê´€ë ¨ ì‘ì—… ê´€ë¦¬   | jwt í† í° ì¸ê°€      | `19093` |
| [`Commerce`]         | ì»¤ë¨¸ìŠ¤ ê´€ë ¨ ë„ë©”ì¸ ì‘ì—… ê´€ë¦¬   |                | `19094` |
| [`Payment`]          | ê²°ì œ ë„ë©”ì¸ ì‘ì—… ê´€ë¦¬    |                | `19095` |
| [`Delivery`]         | ë°°ì†¡ ë„ë©”ì¸ ì‘ì—… ê´€ë¦¬ |                | `19096` |
| [`Notification`]     | ì•ŒëŒ ë„ë©”ì¸ ì‘ì—… ê´€ë¦¬    |                | `19097` |
<br>

## ğŸš§ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### [WIKI](https://github.com/pickple-ecommerce/backend/wiki/Pickple-Trouble-Shooting-Wiki)

<br>

## âœï¸ í”„ë¡œì íŠ¸ ì‹¤í–‰ ë°©ë²•

### 1. í”„ë¡œì íŠ¸ í´ë¡ 

   ```bash
  git clone https://github.com/pickple-ecommerce/backend.git
   ```
### 2. ìˆœì°¨ì ìœ¼ë¡œ docker compose ëª…ë ¹ì–´ ì‹¤í–‰

   ```bash
    docker-compose -f docker-compose.dev.yml --env-file dev.env
    docker-compose -f docker-compose.service.yml --env-file dev.env
   ```
<br>

## ğŸ…°ï¸ íŒ€ ATEEN

<table>
  <thead>
    <tr>
      <th align="center">íŒ€ì›</th>
      <th align="center">í¬ì§€ì…˜</th>
      <th align="center">ë‹´ë‹¹</th>
      <th align="center">GitHub ë§í¬</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="center"><img src="https://github.com/kyungjinleelee.png" width="100px;" alt=""/><br /><sub><b>ì´ê²½ì§„</b></sub></a></td>
      <td align="center">ğŸ‘‘ Leader</td>
      <td align="left">
        - Eureka, gateway í™˜ê²½ êµ¬ì¶•<br />
        - User, Auth ë„ë©”ì¸ ë°±ì—”ë“œ ê°œë°œ (ì¸ì¦/ì¸ê°€ ë° ë°±ì˜¤í”¼ìŠ¤)<br />
        - ìƒí’ˆ ë° ì¬ê³  ë„ë©”ì¸ ë°±ì—”ë“œ ê°œë°œ<br />
        - ì˜ˆì•½êµ¬ë§¤ ê¸°ëŠ¥ ê°œë°œ<br />
        - Redis master-slave êµ¬ì¡° ë° sentinel êµ¬ì¶•
      </td>
      <td align="center"><a href="https://github.com/kyungjinleelee">GitHub</a></td>
    </tr>
    <tr>
      <td align="center"><img src="https://github.com/easyxun.png" width="100px;" alt=""/><br /><sub><b>ì´ì§€ì„ </b></sub></a></td>
      <td align="center">ğŸ‘‘ Sub-Leader</td>
      <td align="left">
        - ì—…ì²´ ë„ë©”ì¸ ë°±ì—”ë“œ ê°œë°œ<br />
        - ì£¼ë¬¸ ë„ë©”ì¸ ë°±ì—”ë“œ ê°œë°œ<br />
        - Resilience4j ì„œí‚· ë¸Œë ˆì´ì»¤ êµ¬í˜„
      </td>
      <td align="center"><a href="https://github.com/easyxun">GitHub</a></td>
    </tr>
    <tr>
      <td align="center"><img src="https://github.com/MeGuuuun.png" width="100px;" alt=""/><br /><sub><b>ë°•ì§€ë¯¼</b></sub></a></td>
      <td align="center">ğŸ«…ğŸ» Member</td>
      <td align="left">
        - ê²°ì œ ë„ë©”ì¸ ë°±ì—”ë“œ ê°œë°œ<br />
        - ì•Œë¦¼ ë„ë©”ì¸ ë°±ì—”ë“œ ê°œë°œ<br />
        - Prometheusì™€ Grafana ì—°ë™ìœ¼ë¡œ ì„œë²„ ëª¨ë‹ˆí„°ë§ ë° Slackìœ¼ë¡œ ì•Œë¦¼ ë°œì†¡ ê¸°ëŠ¥ êµ¬í˜„<br />
        - Loki í™œìš©í•˜ì—¬ ë¡œê·¸ ê´€ë¦¬ ë° ì‹œê°í™”
      </td>
      <td align="center"><a href="https://github.com/MeGuuuun">GitHub</a></td>
    </tr>
    <tr>
      <td align="center"><img src="https://github.com/kimjinmyeong.png" width="100px;" alt=""/><br /><sub><b>ê¹€ì§„ëª…</b></sub></a></td>
      <td align="center">ğŸ«…ğŸ» Member</td>
      <td align="left">
        - ë°°ì†¡ ë„ë©”ì¸ ë°±ì—”ë“œ ê°œë°œ<br />
        - í”„ë¡œì íŠ¸ Gradle ë©€í‹° ëª¨ë“ˆ êµ¬ì„±<br />
        - Github Actionsë¥¼ í™œìš©í•˜ì—¬ CI/CD êµ¬ì„±<br />
        - AWS Infra êµ¬ì„± ë° ë°°í¬
      </td>
      <td align="center"><a href="https://github.com/kimjinmyeong">GitHub</a></td>
    </tr>
  </tbody>
</table>
